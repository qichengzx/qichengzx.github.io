
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>

  
  【译】使用 Go，Echo 和 Vue 创建单页 TODO 应用 - 启程

</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link href="/css/style.css" rel="stylesheet" type="text/css">
<meta property="og:type" content="website">
<meta property="og:title" content="启程">
<meta property="og:url" content="https://qichengzx.github.io">
<meta property="og:site_name" content="启程">
<meta property="og:description" content="记录写代码过程中的成长，不要把你仅知道的那一点点东西当成全世界">
<link rel="icon" href="/favicon.ico">

</head>
<body>
<div id="container">
  <div id="wrap">
    
        <header id="header">
          <div id="banner"></div>
          <div id="header-outer" class="outer">
            <div id="header-title" class="inner">
              <h1 id="logo-wrap">
                <a href="https://qichengzx.github.io" id="logo">启程</a>
              </h1>
              
            </div>
            <div id="header-inner" class="inner">
              <nav id="main-nav">
                <a id="main-nav-toggle" class="nav-icon"></a>
                
                <a class="main-nav-link" href="/">Home</a>
                
                <a class="main-nav-link" href="/archives">Archives</a>
                
                <a class="main-nav-link" href="https://github.com/qichengzx">GitHub</a>
                
              </nav>
              <nav id="sub-nav">
              
                <a id="nav-search-btn" class="nav-icon" title="Search"></a>
              </nav>
              <div id="search-form-wrap">
                <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
                  <input type="search" name="q" class="search-form-input" placeholder="Search">
                  <button type="submit" class="search-form-submit">&#xF002;</button>
                  <input type="hidden" name="sitesearch" value="https://qichengzx.github.io">
                </form>
              </div>
            </div>
          </div>
        </header>

    <div class="outer">
      <section id="main">
      
        
                <article id="56fa7b149a4280d340a829e2ea587fea" class="article" itemscope itemprop="blogPost">
                  <div class="article-meta">
                    <a href="https://qichengzx.github.io/2018/05/13/create-a-single-page-app-with-go-echo-and-vue.html" class="article-date">
                      <time itemprop="datePublished">2018-05-13 11:19:27</time>
                    </a>
                    <div class="article-category">
                      <a class="article-category-link" href="/categories/golang">golang</a>
                    </div>
                  </div>
                  <div class="article-inner">
                    <header class="article-header">
                      <h1 itemprop="name">
                        <a class="article-title" href="https://qichengzx.github.io/2018/05/13/create-a-single-page-app-with-go-echo-and-vue.html">【译】使用 Go，Echo 和 Vue 创建单页 TODO 应用</a>
                      </h1>
                    </header>
                    <div class="article-entry" itemprop="articleBody">
                      <p>本教程中我们将会创建一个 “todo” 应用。完成后可以实现创建任务，展示新创建的任务和删除它们。</p>

<p>此程序后端使用 Go 语言。Go 由 Google 开发。虽然不是最流行的语言，但是正在逐步得到认可。Go 非常轻量级，易于学习，运行快。此教程假设你已经对于这门语言有了一些了解，并且已经安装和配置好了开发环境。</p>

<p>我们将会使用 Echo 框架，Echo 框架相当于 PHP 语言的 Slim PHP 或 Lumen 框架，你应该有点熟悉使用微框架和使用路由处理 http 请求的概念。</p>

<p>任务数据将会储存在 SQLite 数据库中，SQLite 是一个轻量级的可替代 MySQL 或 PostgreSQL 的数据库。数据会存在一个独立的文件中，与应用在同一目录而不是存在服务器上。</p>

<p>最后，前端使用 HTML5 和流行的 VueJS JavaScript 框架，需要对 VueJS 有一定的了解。</p>

<p>我们的应用程序将分解成四个基本部分。我们将拥有我们的主包，用来设置路由和数据库。接下来，我们将有几个处理程序用来处理不同的路由。 当然，我们也会有一个 Task 模型，它将使用 SQLite 进行持久化。最后，应用程序将有一个简单的 index.html 文件，其中包含我们的 HTML5 和 VueJS 客户端代码。 让我们深入挖掘！</p>

<h2>路由和数据库</h2>

<p>在入口文件中会引入几个包。”database/sql” 是Go标准包，但是 Echo 和 SQLite 需要从 Github 下载。</p>

<pre><code class="language-shell">$ go get github.com/labstack/echo
$ go get github.com/mattn/go-sqlite3
</code></pre>

<p>然后创建应用的目录。</p>

<pre><code class="language-shell">$ cd $GOPATH/src
$ mkdir go-echo-vue &amp;&amp; cd go-echo-vue
</code></pre>

<p>现在开始写路由，在 go-echo-vue 目录创建一个文件并命名为 “todo.go” ，然后引入 Echo 框架。</p>

<pre><code class="language-golang">// todo.go
package main

import (
	&quot;github.com/labstack/echo&quot;
	&quot;github.com/labstack/echo/engine/standard&quot;
)
</code></pre>

<p>下一步，创建go程序必需的 “main” 方法。</p>

<pre><code class="language-golang">// todo.go
func main() { }
</code></pre>

<p>为了使前端的 VueJS 可以和后端通信，创建任务，需要设置一些基本的路由。第一件事就是实例化一个 Echo 。然后使用內建方法定义几个路由。如果使用过其他框架，应该会熟悉这个概念。</p>

<p>路由使用一个正则作为第一个参数，然后使用一个处理方法作为第二个参数。在此教程中必须使用 Echo.HandlerFunc 接口。</p>

<p>现在可以在 “main” 方法中创建几个给前端通信使用的路由了。</p>

<pre><code class="language-golang">// todo.go
func main() {
    // Create a new instance of Echo
    e := echo.New()

    e.GET(&quot;/tasks&quot;, func(c echo.Context) error { return c.JSON(200, &quot;GET Tasks&quot;) })
    e.PUT(&quot;/tasks&quot;, func(c echo.Context) error { return c.JSON(200, &quot;PUT Tasks&quot;) })
    e.DELETE(&quot;/tasks/:id&quot;, func(c echo.Context) error { return c.JSON(200, &quot;DELETE Task &quot;+c.Param(&quot;id&quot;)) })

    // Start as a web server
    e.Run(standard.New(&quot;:8000&quot;))
}
</code></pre>

<p>以上路由只输出了固定的文本内容，将会在接下来改进。</p>

<p>可以使用 Postman 测试以上接口。</p>

<pre><code class="language-shell">$ go build todo.go
$ ./todo
</code></pre>

<p>运行后，打开 Postman，输入 localhost:8000，选择 GET 来测试 “/tasks” 路由，正常可以看到 “GET Tasks”。</p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/o2AE4E3lRzmGDo9I4Uqv_get_tasks.png" alt="" /></p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/Et8CnQzSZihek28dvsoL_put_tasks.png" alt="" /></p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/L2MH4UkDTQG6tBjW492c_delete_tasks.png" alt="" /></p>

<p>然后是配置数据库，指定存储文件为 “storage.db” ，如果不存在程序会自动创建。数据库创建后需要运行数据迁移。</p>

<pre><code class="language-golang">// todo.go

import (
	&quot;database/sql&quot;

	&quot;github.com/labstack/echo&quot;
	&quot;github.com/labstack/echo/engine/standard&quot;
	_ &quot;github.com/mattn/go-sqlite3&quot;
)
</code></pre>

<p>在 main 方法里增加</p>

<pre><code class="language-golang">// todo.go
func main() {
	db := initDB(&quot;storage.db&quot;)
	migrate(db)
</code></pre>

<p>然后需要定义 initDB 和 migrate 方法。</p>

<pre><code class="language-golang">// todo.go
func initDB(filepath string) *sql.DB {
	db, err := sql.Open(&quot;sqlite3&quot;, filepath)

	//检查错误
	if err != nil {
		panic(err)
	}

	//如果open没有报错，但是仍然没有数据库连接，一样要退出
	if db == nil {
		panic(&quot;db nil&quot;)
	}

	return db
}

func migrate(db *sql.DB) {
	sql := `
	CREATE TABLE IF NOT EXISTS tasks(
		id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
		name VARCHAR NOT NULL
	);
	`

	_, err := db.Exec(sql)

	//出错退出
	if err != nil {
		panic(err)
	}
}
</code></pre>

<p>这两个方法用于连接数据库，建表。”initDB” 会打开一个 db 文件或者创建它。如果失败程序会退出。</p>

<p>“migrate” 方法运行创建表的 SQL 。如果失败程序退出。</p>

<p>然后</p>

<pre><code class="language-shell">$ go build todo.go
$ ./todo
</code></pre>

<p>查看效果。</p>

<p>如果打开另一个终端，列出当前目录内容时会发现已经创建了 “storage.db” ,执行以下命令来确认它确实是个 SQLite 文件。</p>

<pre><code class="language-shell">$ sqlite3 storage.db
</code></pre>

<p>需要安装 <a href="https://www.sqlite.org/download.html">SQLite</a> 才可以执行此命令。</p>

<p>此命令会给出提示，输入 “.tables” ，可以列出所有的表，输入 “.quit” 退出。</p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/pDLs76QxRVuxllrUPOqV_sqlite3.png" alt="" /></p>

<h2>处理请求</h2>

<p>之前已经创建了与前端交互的接口，现在需要创建或删除任务时给客户端真实的结果。这需要几个方法去完成。</p>

<p>在 “todo.go” 中需要引入新的包。</p>

<pre><code class="language-golang">package main
import (
    &quot;database/sql&quot;
    &quot;go-echo-vue/handlers&quot;

    &quot;github.com/labstack/echo&quot;
    &quot;github.com/labstack/echo/engine/standard&quot;
    _ &quot;github.com/mattn/go-sqlite3&quot;
)
</code></pre>

<p>然后修改路由，使用刚刚创建的 handlers 包去处理。</p>

<pre><code class="language-golang">// todo.go
    e := echo.New()

    e.File(&quot;/&quot;, &quot;public/index.html&quot;)
    e.GET(&quot;/tasks&quot;, handlers.GetTasks(db))
    e.PUT(&quot;/tasks&quot;, handlers.PutTask(db))
    e.DELETE(&quot;/tasks/:id&quot;, handlers.DeleteTask(db))

    e.Run(standard.New(&quot;:8000&quot;))
}
</code></pre>

<p>查看这段代码，你可能会注意到列出的处理程序实际上并不遵循 Echo 所要求的函数签名。相反，这些函数返回一个满足该接口的函数。这是我用过的一个技巧，所以我们可以将 db 实例从 handler 传递到 handler ，而不必在每次我们要使用数据库时创建一个新实例。稍后会更清楚。</p>

<p>我们还增加了一条额外的路由。这是一个包含我们的 VueJS 客户端代码的静态 html 文件。我们可以使用 “File” 功能提供静态文件。在这种情况下，将在访问 “/“ 的时候输出我们的客户端代码。</p>

<p>然后创建一个名为 “handlers” 的目录，并在该目录中创建一个名为 “tasks.go” 的文件。接下来，我们需要导入一些我们需要的软件包。</p>

<pre><code class="language-golang">// handlers/tasks.go
package handlers

import (
    &quot;database/sql&quot;
    &quot;net/http&quot;
    &quot;strconv&quot;

    &quot;github.com/labstack/echo&quot;
)
</code></pre>

<p>接下来的这一行代码，它允许我们在响应中返回任意的 JSON ，就像你稍后会看到的一样。这是一个以字符串作为 key ，任意类型作为值的 map 结构。 在Go中，”interface” 关键字表示从原始数据类型到用户定义类型或结构的任何内容。</p>

<pre><code class="language-golang">// hanlers/tasks.go
type H map[string]interface{}
</code></pre>

<p>这个文件主要是处理函数。它们都以 db 连接作为参数，但要记住， Echo 路由的正确处理程序，需要实现 Echo.HandlerFunc 接口。 我们通过返回与接口签名匹配的匿名函数来实现此目标。该函数现在可以使用数据库连接并将其传递给我们的模型。</p>

<p>为了能正常工作，暂时我们不会处理数据库。只会返回一些假数据。</p>

<pre><code class="language-golang">// handlers/tasks.go

// GetTasks endpoint
func GetTasks(db *sql.DB) echo.HandlerFunc {
    return func(c echo.Context) error {
        return c.JSON(http.StatusOK, &quot;tasks&quot;)
    }
}

// PutTask endpoint
func PutTask(db *sql.DB) echo.HandlerFunc {
    return func(c echo.Context) error {
        return c.JSON(http.StatusCreated, H{
            &quot;created&quot;: 123,
    }
}

// DeleteTask endpoint
func DeleteTask(db *sql.DB) echo.HandlerFunc {
    return func(c echo.Context) error {
        id, _ := strconv.Atoi(c.Param(&quot;id&quot;))
        return c.JSON(http.StatusOK, H{
            &quot;deleted&quot;: id,
        })
    }
}
</code></pre>

<p>Go http 软件包为我们提供了一些便利的常量来表示 HTTP 状态代码。例如，我们使用 http.StatusCreated 作为我们的 PUT 响应。 这些处理程序中的每一个现在都会返回 JSON 格式的响应。最后一个函数 “DeleteTask” 需要一个 id 参数。我们使用 strconv 包和 Atoi（alpha to integer）函数来确保 id 被转换为整数。 保证在通过数据库中的 id 查询任务时正确使用它。</p>

<p>要测试这些处理程序，要重新编译并运行应用程序。我们可以使用 Postman 再次测试。</p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/yxMJc9YQQgWA9HhbComc_get_tasks_handler.webp" alt="" /></p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/fWkK9dmFS8eR6CxZfXCA_put_tasks_handler.webp" alt="" /></p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/SGWxvMXS3m4s10NjBMKQ_delete_tasks_handler.webp" alt="" /></p>

<h2>MODEL</h2>

<p>现在我们已经有了一部分处理程序，我们的应用程序需要使用数据库。但是我们不是直接从处理程序进行数据库调用，而是通过将数据库逻辑抽象为模型来保持代码的整洁。</p>

<p>首先让我们在新创建的处理程序文件中引用我们的新模型。</p>

<p>导入我们即将创建的模型包。</p>

<pre><code class="language-golang">// handlers/tasks.go
package handlers

import (
    &quot;database/sql&quot;
    &quot;net/http&quot;
    &quot;strconv&quot;

    &quot;go-echo-vue/models&quot;

    &quot;github.com/labstack/echo&quot;
)
</code></pre>

<p>然后将调用添加到我们的处理函数中。</p>

<pre><code class="language-golang">// handlers/tasks.go

// GetTasks endpoint
func GetTasks(db *sql.DB) echo.HandlerFunc {
    return func(c echo.Context) error {
        // Fetch tasks using our new model
        return c.JSON(http.StatusOK, models.GetTasks(db))
    }
}

// PutTask endpoint
func PutTask(db *sql.DB) echo.HandlerFunc {
    return func(c echo.Context) error {
        // Instantiate a new task
        var task models.Task
        // Map imcoming JSON body to the new Task
        c.Bind(&amp;task)
        // Add a task using our new model
        id, err := models.PutTask(db, task.Name)
        // Return a JSON response if successful
        if err == nil {
            return c.JSON(http.StatusCreated, H{
                &quot;created&quot;: id,
            })
        // Handle any errors
        } else {
            return err
        }
    }
}

// DeleteTask endpoint
func DeleteTask(db *sql.DB) echo.HandlerFunc {
    return func(c echo.Context) error {
        id, _ := strconv.Atoi(c.Param(&quot;id&quot;))
        // Use our new model to delete a task
        _, err := models.DeleteTask(db, id)
        // Return a JSON response on success
        if err == nil {
            return c.JSON(http.StatusOK, H{
                &quot;deleted&quot;: id,
            })
        // Handle errors
        } else {
            return err
        }
    }
}
</code></pre>

<p>现在在 “PutTask” 函数中，你会看到 “c.Bind”。 将会在 PUT 请求中发送 JSON 格式的响应内容，并将其映射到 Task 结构。 Task 结构将在我们的模型包中定义。</p>

<p>这里还需要注意一些错误检查。 Tasks Model 具有根据操作是否成功返回数据或错误的函数。我们的处理程序需要做出相应的处理。</p>

<p>现在我们可以创建我们的模型。 这是实际与数据库进行交互的。 创建一个名为 “models” 的目录，并在该目录中创建一个名为 “tasks.go” 的文件。</p>

<p>然后引入需要的包。</p>

<pre><code class="language-golang">// models/tasks.go
package models

import (
    &quot;database/sql&quot;

    _ &quot;github.com/mattn/go-sqlite3&quot;
)
</code></pre>

<p>接下来，我们需要创建一个 Task 类型，包含两个字段 ID 和 Name。 Go 允许使用反引号将元数据添加到变量。在这种情况下，我们只是定义了每个字段在转换为 JSON 后的样子。 “c.Bind” 函数在填充新 Task 时知道在如何映射 JSON 数据。</p>

<p>另外还需要一个表示 Task 的集合的模型。</p>

<pre><code class="language-golang">// models/tasks.go

// Task is a struct containing Task data
type Task struct {
    ID   int    `json:&quot;id&quot;`
    Name string `json:&quot;name&quot;`
}

// TaskCollection is collection of Tasks
type TaskCollection struct {
    Tasks []Task `json:&quot;items&quot;`
}
</code></pre>

<p>获取任务只需从数据库中查询所有 Task，将其放到 TaskCollection 并返回。</p>

<pre><code class="language-golang">// models/tasks.go

func GetTasks(db *sql.DB) TaskCollection {
    sql := &quot;SELECT * FROM tasks&quot;
    rows, err := db.Query(sql)
    // Exit if the SQL doesn't work for some reason
    if err != nil {
        panic(err)
    }
    // make sure to cleanup when the program exits
    defer rows.Close()

    result := TaskCollection{}
    for rows.Next() {
        task := Task{}
        err2 := rows.Scan(&amp;task.ID, &amp;task.Name)
        // Exit if we get an error
        if err2 != nil {
            panic(err2)
        }
        result.Tasks = append(result.Tasks, task)
    }
    return result
}
</code></pre>

<p>PutTask 将新 Task 插入数据库，并在成功时返回新的ID，并在失败时 panic。</p>

<pre><code class="language-golang">// models/tasks.go

func PutTask(db *sql.DB, name string) (int64, error) {
    sql := &quot;INSERT INTO tasks(name) VALUES(?)&quot;

    // Create a prepared SQL statement
    stmt, err := db.Prepare(sql)
    // Exit if we get an error
    if err != nil {
        panic(err)
    }
    // Make sure to cleanup after the program exits
    defer stmt.Close()

    // Replace the '?' in our prepared statement with 'name'
    result, err2 := stmt.Exec(name)
    // Exit if we get an error
    if err2 != nil {
        panic(err2)
    }

    return result.LastInsertId()
}
</code></pre>

<p>DeleteTask 用来删除 Task。</p>

<pre><code class="language-golang">// models/tasks.go

func DeleteTask(db *sql.DB, id int) (int64, error) {
    sql := &quot;DELETE FROM tasks WHERE id = ?&quot;

    // Create a prepared SQL statement
    stmt, err := db.Prepare(sql)
    // Exit if we get an error
    if err != nil {
        panic(err)
    }

    // Replace the '?' in our prepared statement with 'id'
    result, err2 := stmt.Exec(id)
    // Exit if we get an error
    if err2 != nil {
        panic(err2)
    }

    return result.RowsAffected()
}
</code></pre>

<p>请注意，我们通过 “db.Prepare” 在我们的模型函数中使用准备好的 SQL 语句。有两个原因。首先，一个准备好的语句可以被编译和缓存，所以执行多次更快。 其次，最重要的是准备好的语句可以防止 SQL 注入攻击。</p>

<p>现在再次使用 Postman 。 首先，我们将检查 “GET /tasks “ 。正常应该看到 Tasks 为空的 JSON。</p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/50DVGi4aQYqctZ14LzMp_get_tasks_null.png" alt="" /></p>

<p>现在来添加一个 Task 。 在 Postman 中，将 HTTP请求方式切换到 “PUT”，然后单击 “Body” 选项卡。 选中 “raw” 并选择 JSON(application/json) 作为类型。 在文本框中输入以下内容。</p>

<pre><code class="language-json">{
    &quot;name&quot;: &quot;Foobar&quot;
}
</code></pre>

<p>提交后应该收到 “created” 的响应。</p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/GCY1n7oAR7Siy2Izn1dE_put_tasks_body.png" alt="" /></p>

<p>记下返回的 id ，因为我们需要它来测试 “DELETE /tasks” 。 就像在前面的例子中一样，将请求方式设置为 “DELETE” 并将 URL 改为 “/tasks/:id” 。 在我们以前的测试中用 “id” 替换 “:id”。 你应该得到一个成功的 “deleted” 消息。</p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/WYuIfNAaSvKEN00TpwLE_delete_tasks_id.png" alt="" /></p>

<p>现在可以再次请求 “GET /tasks”，正常应该返回 “null”。</p>

<h2>前端</h2>

<p>现在来处理我们的前端页面。为了简单起见，将我们的 Javascript 代码写在 HTML 中。标记很简单。 我们需要使用一些库，如 Bootstrap，JQuery，当然还有 VueJS。 用户界面只是一个输入框，一些按钮和任务的列表。 创建一个名为 ‘public’ 的目录，并在该目录内创建一个名为 “index.html” 的文件。</p>

<pre><code class="language-html">&lt;!-- public/index.html --&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;

        &lt;title&gt;TODO App&lt;/title&gt;

        &lt;!-- Latest compiled and minified CSS --&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css&quot;&gt;

        &lt;!-- Font Awesome --&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css&quot;&gt;

        &lt;!-- JQuery --&gt;
        &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js&quot;&gt;&lt;/script&gt;

        &lt;!-- Latest compiled and minified JavaScript --&gt;
        &lt;script src=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;

        &lt;!-- Vue.js --&gt;
        &lt;script src=&quot;http://cdnjs.cloudflare.com/ajax/libs/vue/1.0.24/vue.min.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/vue-resource/0.7.0/vue-resource.min.js&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div class=&quot;container&quot;&gt;
            &lt;div class=&quot;row&quot;&gt;
                &lt;div class=&quot;col-md-4&quot;&gt;
                    &lt;h2&gt;My Tasks&lt;/h2&gt;
                    &lt;ul class=&quot;list-group&quot;&gt;
                        &lt;li class=&quot;list-group-item&quot; v-for=&quot;task in tasks&quot;&gt;
                            {{ task.name }}
                            &lt;span class=&quot;pull-right&quot;&gt;
                                &lt;button class=&quot;btn btn-xs btn-danger&quot; v-on:click=&quot;deleteTask($index)&quot;&gt;
                                    &lt;i class=&quot;fa fa-trash-o&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;
                                &lt;/button&gt;
                            &lt;/span&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;
                    &lt;div class=&quot;input-group&quot;&gt;
                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;New Task&quot; v-on:keyup.enter=&quot;createTask&quot; v-model=&quot;newTask.name&quot;&gt;
                        &lt;span class=&quot;input-group-btn&quot;&gt;
                            &lt;button class=&quot;btn btn-primary&quot; type=&quot;button&quot; v-on:click=&quot;createTask&quot;&gt;Create&lt;/button&gt;
                        &lt;/span&gt;
                    &lt;/div&gt;&lt;!-- /input-group --&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>现在重新运行我们的应用程序，然后打开 “<a href="http://localhost:8000">http://localhost:8000</a>&ldquo;。</p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/JamFkkfkSaOKBlsqjzBU_todo_ui.png" alt="" /></p>

<p>在最后的 “div” 标签下，将我们的 VueJS 代码放在一个 “script” 标签中。 VueJS 代码稍微复杂一点，但也非常明显。 我们有几个创建和删除任务的方法以及一个在初始化时运行的方法。初始化时获取当前存储在数据库中的所有任务。</p>

<p>为了与后端进行通信，我们需要使用 HTTP 客户端。在这种情况下，我们将使用 vue-resource。 可以通过引用 “this.$http” 然后使用任何 HTTP 请求方式（get，put等）来使用它。</p>

<pre><code class="language-html">&lt;!-- public/index.html --&gt;

       &lt;script&gt;
           new Vue({
               el: 'body',

               data: {
                   tasks: [],
                   newTask: {}
               },

         // This is run whenever the page is loaded to make sure we have a current task list
               created: function() {
       // Use the vue-resource $http client to fetch data from the /tasks route
                   this.$http.get('/tasks').then(function(response) {
                       this.tasks = response.data.items ? response.data.items : []
                   })
               },

               methods: {
                   createTask: function() {
                       if (!$.trim(this.newTask.name)) {
                           this.newTask = {}
                           return
                       }

            // Post the new task to the /tasks route using the $http client
                       this.$http.put('/tasks', this.newTask).success(function(response) {
                           this.newTask.id = response.created
                           this.tasks.push(this.newTask)
                           console.log(&quot;Task created!&quot;)
                           console.log(this.newTask)
                           this.newTask = {}
                       }).error(function(error) {
                           console.log(error)
                       });
                   },

                   deleteTask: function(index) {
            // Use the $http client to delete a task by its id
                       this.$http.delete('/tasks/' + this.tasks[index].id).success(function(response) {
                           this.tasks.splice(index, 1)
                           console.log(&quot;Task deleted!&quot;)
                       }).error(function(error) {
                           console.log(error)
                       })
                   }
               }
           })
       &lt;/script&gt;
</code></pre>

<h2>运行</h2>

<p>现在我们的应用程序已经完成了。我们需要编译然后运行它。</p>

<pre><code class="language-shell">$ go build todo.go
$ ./todo
</code></pre>

<p>然后打开 “<a href="http://localhost:8000">http://localhost:8000</a>&ldquo;。</p>

<p><img src="/images/create-a-single-page-app-with-go-echo-and-vue/5RyzqEVWTUS6BEmf7eQA_ui_final.png" alt="" /></p>

<h2>总结</h2>

<p>在本教程中，我们学习了如何使用 Echo 框架和 VueJS 创建前端页面和简单的 Go 后端应用。 希望这会激起你对 Go 语言的好奇心，并激励你建立更复杂的 Web 应用。</p>

<h2>原文链接</h2>

<p><a href="https://scotch.io/tutorials/create-a-single-page-app-with-go-echo-and-vue">Create a Single Page App With Go, Echo and Vue</a></p>

                    </div>
                    <footer class="article-footer">
                      <a href="https://qichengzx.github.io/2018/05/13/create-a-single-page-app-with-go-echo-and-vue.html#comments" class="article-comment-link">Comments</a>
                      
                        <ul class="article-tag-list">
                        
                          <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="/tags/go">go</a>
                          </li>
                        
                          <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="/tags/vue">vue</a>
                          </li>
                        
                        </ul>
                      
                    </footer>
                  </div>
                  <nav id="article-nav">
                    
                    <a href="https://qichengzx.github.io/2018/05/29/git-pull-upstream.html" id="article-nav-newer" class="article-nav-link-wrap">
                      <strong class="article-nav-caption">Newer</strong>
                      <div class="article-nav-title">
                      Git 同步上游源更改
                      </div>
                    </a>
                    

                    
                    <a href="https://qichengzx.github.io/2018/05/12/generating-random-keys-with-keygen.html" id="article-nav-older" class="article-nav-link-wrap">
                      <strong class="article-nav-caption">Older</strong>
                      <div class="article-nav-title">
                      Keygen 包简介
                      </div>
                    </a>
                    
                  </nav>
                </article>

      
      </section>
      
      
            <aside id="sidebar">
            
    
                <div class="widget-wrap">
                  <h3 class="widget-title">Categories</h3>
                  <div class="widget">
                    <ul class="category-list">
                      
                      
                      <li class="category-list-item">
                        <a class="category-list-link" href="/categories/default/">default</a>
                        <span class="category-list-count">9</span>
                      </li>
                      
                      <li class="category-list-item">
                        <a class="category-list-link" href="/categories/git/">git</a>
                        <span class="category-list-count">3</span>
                      </li>
                      
                      <li class="category-list-item">
                        <a class="category-list-link" href="/categories/golang/">golang</a>
                        <span class="category-list-count">24</span>
                      </li>
                      
                      <li class="category-list-item">
                        <a class="category-list-link" href="/categories/javascript/">javascript</a>
                        <span class="category-list-count">7</span>
                      </li>
                      
                      <li class="category-list-item">
                        <a class="category-list-link" href="/categories/linux/">linux</a>
                        <span class="category-list-count">1</span>
                      </li>
                      
                      <li class="category-list-item">
                        <a class="category-list-link" href="/categories/mysql/">mysql</a>
                        <span class="category-list-count">4</span>
                      </li>
                      
                      <li class="category-list-item">
                        <a class="category-list-link" href="/categories/nginx/">nginx</a>
                        <span class="category-list-count">1</span>
                      </li>
                      
                      <li class="category-list-item">
                        <a class="category-list-link" href="/categories/php/">php</a>
                        <span class="category-list-count">12</span>
                      </li>
                      
                    </ul>
                  </div>
                </div>
    

            
    
                <div class="widget-wrap">
                  <h3 class="widget-title">Tags</h3>
                  <div class="widget">
                    <ul class="tag-list">
                      
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/ECharts/">ECharts</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/Keygen/">Keygen</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/captcha/">captcha</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/crontab/">crontab</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/discuz/">discuz</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/docker/">docker</a>
                        <span class="tag-list-count">2</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/dropbox/">dropbox</a>
                        <span class="tag-list-count">2</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/excel/">excel</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/fetch/">fetch</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/geo/">geo</a>
                        <span class="tag-list-count">3</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/gin/">gin</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/git/">git</a>
                        <span class="tag-list-count">3</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/github/">github</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/go/">go</a>
                        <span class="tag-list-count">24</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/goquery/">goquery</a>
                        <span class="tag-list-count">2</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/hexo/">hexo</a>
                        <span class="tag-list-count">3</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/https/">https</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/input/">input</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/javascript/">javascript</a>
                        <span class="tag-list-count">3</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/js/">js</a>
                        <span class="tag-list-count">2</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/laravel/">laravel</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/leetcode/">leetcode</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/linux/">linux</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/mysql/">mysql</a>
                        <span class="tag-list-count">7</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/nginx/">nginx</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/node/">node</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/pdo/">pdo</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/php/">php</a>
                        <span class="tag-list-count">14</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/qq/">qq</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/rabbitmq/">rabbitmq</a>
                        <span class="tag-list-count">6</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/react-native/">react-native</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/redigo/">redigo</a>
                        <span class="tag-list-count">3</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/redis/">redis</a>
                        <span class="tag-list-count">5</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/rust/">rust</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/ssl/">ssl</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/time/">time</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/vps/">vps</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/vue/">vue</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/widget/">widget</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/%e4%bb%8a%e6%97%a5%e5%a4%b4%e6%9d%a1/">今日头条</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/%e6%a0%87%e8%af%86%e7%ac%a6/">标识符</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/%e7%88%b1%e5%a5%87%e8%89%ba/">爱奇艺</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/%e7%9f%ad%e7%bd%91%e5%9d%80/">短网址</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/%e7%b3%97%e7%99%be/">糗百</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/%e7%bd%91%e7%bb%9c%e8%af%b7%e6%b1%82/">网络请求</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                      <li class="tag-list-item">
                        <a class="tag-list-link" href="/tags/%e9%98%9f%e5%88%97/">队列</a>
                        <span class="tag-list-count">1</span>
                      </li>
                      
                    </ul>
                  </div>
                </div>
    

            
    
            <div class="widget-wrap">
              <h3 class="widget-title">Archives</h3>
              <div class="widget">
                <ul class="archive-list">
                  
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2015/11">2015/11</a>
                    <span class="archive-list-count">7</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2015/12">2015/12</a>
                    <span class="archive-list-count">4</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/01">2016/01</a>
                    <span class="archive-list-count">3</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/02">2016/02</a>
                    <span class="archive-list-count">4</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/04">2016/04</a>
                    <span class="archive-list-count">4</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/05">2016/05</a>
                    <span class="archive-list-count">3</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/07">2016/07</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/09">2016/09</a>
                    <span class="archive-list-count">3</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/10">2016/10</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/11">2016/11</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2016/12">2016/12</a>
                    <span class="archive-list-count">3</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2017/03">2017/03</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2017/06">2017/06</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2017/07">2017/07</a>
                    <span class="archive-list-count">2</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2017/08">2017/08</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2017/09">2017/09</a>
                    <span class="archive-list-count">3</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2017/11">2017/11</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2018/02">2018/02</a>
                    <span class="archive-list-count">4</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2018/04">2018/04</a>
                    <span class="archive-list-count">2</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2018/05">2018/05</a>
                    <span class="archive-list-count">6</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2018/06">2018/06</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2019/01">2019/01</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2020/02">2020/02</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2021/01">2021/01</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2021/07">2021/07</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                  <li class="archive-list-item">
                    <a class="archive-list-link" href="/archives/2025/01">2025/01</a>
                    <span class="archive-list-count">1</span>
                  </li>
                  
                </ul>
              </div>
            </div>
    

            
    
            <div class="widget-wrap">
              <h3 class="widget-title">RECENTS</h3>
              <div class="widget">
                <ul>
                  
                  <li>
                    <a href="https://qichengzx.github.io/2025/01/12/08-rustlings-enums.html">08-rustlings-enums</a>
                  </li>
                  
                  <li>
                    <a href="https://qichengzx.github.io/2021/07/18/pipeline-pattern-in-go-part-1.html">Go 流水线模式</a>
                  </li>
                  
                  <li>
                    <a href="https://qichengzx.github.io/2021/01/01/unmarshaling-time-values-from-json.html">Go json 时间格式解析</a>
                  </li>
                  
                  <li>
                    <a href="https://qichengzx.github.io/2020/02/02/graceful-shutdown-of-a-tcp-server-in-go.html">优雅的关闭Go TCP Server</a>
                  </li>
                  
                  <li>
                    <a href="https://qichengzx.github.io/2019/01/01/go-in-the-browser.html">【译】Go和WebAssembly：在浏览器中运行Go程序</a>
                  </li>
                  
                </ul>
              </div>
            </div>
    

            </aside>

      
    </div>
    
        <footer id="footer">
          <div class="outer">
            <div id="footer-info" class="inner">
              &copy; 2025 启程<br>
              Powered by <a href="https://github.com/qichengzx/gopress" target="_blank">gopress</a>
            </div>
            </div>
        </footer>

  </div>
  
<nav id="mobile-nav">
  
  <a class="mobile-nav-link" href="/">Home</a>
  
  <a class="mobile-nav-link" href="/archives">Archives</a>
  
  <a class="mobile-nav-link" href="https://github.com/qichengzx">GitHub</a>
  
</nav>

  

<script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


</div>
</body>
</html>
